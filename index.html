<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeWisdom Cafe</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400&display=swap" rel="stylesheet">
    <style>
        /* (CSS sama persis dengan sebelumnya, tidak diubah) */
    </style>
</head>
<body>
    <div id="menuOverlay" class="overlay"></div>

    <div id="mySidenav" class="side-nav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="#">Home</a>
        <a href="Menu.html">Lihat Menu</a>
        <a href="https://www.instagram.com/wisatadombagarut?igsh=MTMxZmRqNjQ4amRuNw==">Gallery</a>
        <a href="#">About Us</a>
        <a href="https://wa.me/6283143087159">Contact</a>
    </div>

    <div class="container">
        <div class="glassmorphism-card">
            <header class="card-header">
                <div class="menu-toggle" onclick="toggleNav()">
                    <div class="menu-icon" id="menuIcon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="header-text">WELCOME TO DeWISDOM CAFE</div>
                </div>
            </header>

            <main class="card-content">
                <div class="left-section">
                    <img src="https://raw.githubusercontent.com/0xdfkoikoi/wisdomcafe/refs/heads/main/img/pngwisdom.png" alt="Green Plant" class="content-image">
                </div>
                <div class="right-section">
                    <h2 class="main-title">Nature<br>Coffee<br>and Food</h2>
                    <div class="description-section">
                        <h2 class="subtitle">Wisdom Cafe is more than just a coffee</h2>
                        <p class="description-text">Each cup is brewed not just for taste, but to stir the senses and awaken gentle reflection. Here, time slows down, and conversations flow like poetry, rich with meaning and warmth. Whether you're nestled by the window with a book, lost in thought with a latte, or exchanging quiet laughter under the soft glow of lanterns, Wisdom Cafe invites you to pause, breathe, and reconnect with yourself.</p>
                    </div>
                </div>
            </main>

            <!-- Cafe Assistant Section -->
            <section class="assistant-section">
                <h3 class="subtitle">Tanya Domba Wisdom Cafe Assistant â˜•</h3>
                <div id="chat-box" class="chat-box">
                    <div class="chat-message ai">Halo! Saya Asisten Domba. Silakan tanya tentang menu, kopi, atau reservasi.</div>
                </div>
                <div class="chat-input-container">
                    <input type="text" id="user-input" placeholder="Tulis pesan Anda..." />
                    <button id="send-button">Kirim</button>
                </div>
            </section>

            <footer class="card-footer">
                <div class="footer-text">Connect with nature</div>
                <a href="Menu.html" class="footer-button outline-button">Lihat Menu</a>
                <a href="https://www.instagram.com/wisatadombagarut?igsh=MTMxZmRqNjQ4amRuNw==" class="footer-button filled-button">Gallery</a>
            </footer>
        </div>
    </div>
    
    <script src="https://js.puter.com/v2/"></script>
    <script>
        // Pemanggilan awal untuk uji coba
        puter.ai.chat('ada menu apa saja di wisdom cafe?', { model: "gpt-5-nano" })
        .then(result => {
            const chatBox = document.getElementById("chat-box");
            const aiDiv = document.createElement("div");
            aiDiv.className = "chat-message ai";
            aiDiv.textContent = result.text;
            chatBox.appendChild(aiDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        })
        .catch(err => {
            console.error("Error dari Puter AI:", err);
        });

        function toggleNav() {
            var sidenav = document.getElementById("mySidenav");
            var overlay = document.getElementById("menuOverlay");
            var menuIcon = document.getElementById("menuIcon");

            if (sidenav.classList.contains("open")) {
                sidenav.classList.remove("open");
                overlay.classList.remove("active");
                menuIcon.classList.remove("open");
            } else {
                sidenav.classList.add("open");
                overlay.classList.add("active");
                menuIcon.classList.add("open");
            }
        }

        function closeNav() {
            document.getElementById("mySidenav").classList.remove("open");
            document.getElementById("menuOverlay").classList.remove("active");
            document.getElementById("menuIcon").classList.remove("open");
        }

        document.getElementById("menuOverlay").onclick = function() {
            closeNav();
        };

        document.addEventListener('DOMContentLoaded', () => {
            const sendButton = document.getElementById("send-button");
            const userInput = document.getElementById("user-input");

            if (sendButton) {
                sendButton.addEventListener('click', sendMessage);
            }

            if (userInput) {
                userInput.addEventListener("keypress", (event) => {
                    if (event.key === "Enter") {
                        event.preventDefault();
                        sendMessage();
                    }
                });
            }
        });

        async function sendMessage() {
            const userInput = document.getElementById("user-input");
            const chatBox = document.getElementById("chat-box");
            const userMessage = userInput.value.trim();

            if (!userMessage) return;

            const userDiv = document.createElement("div");
            userDiv.className = "chat-message user";
            userDiv.textContent = userMessage;
            chatBox.appendChild(userDiv);

            userInput.value = "";
            chatBox.scrollTop = chatBox.scrollHeight;

            const loadingDiv = document.createElement("div");
            loadingDiv.className = "chat-message ai";
            loadingDiv.textContent = "Domba sedang memikirkan jawaban...";
            chatBox.appendChild(loadingDiv);
            chatBox.scrollTop = chatBox.scrollHeight;

            try {
                const result = await puter.ai.chat(userMessage, { model: "gpt-5-nano" });
                loadingDiv.textContent = result.text;
            } catch (error) {
                console.error("Error calling Puter AI chat:", error);
                loadingDiv.textContent = "Maaf, terjadi kesalahan saat memproses permintaan Anda.";
            }

            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>
</html>
